replicaCount: 1

image:
  repository: lmsysorg/sglang
  tag: v0.5.4.post3
  pullPolicy: Always

container:
  port: 30088
  command:
    - "/usr/bin/python3"
  args:
    - "-m"
    - "sglang.launch_server"
    - "--model-path"
    - "Qwen/Qwen3-VL-8B-Instruct-FP8"
    - "--host"
    - "0.0.0.0"
    - "--port"
    - "30088"
    - "--attention-backend"
    - "fa3"
    - "--mem-fraction-static"
    - "0.5"
    - "--cuda-graph-max-bs"
    - "32"
    - "--model-loader-extra-config"
    - '{"enable_multithread_load": true, "num_threads": 32}'
    - "--enable-metrics"

service:
  type: ClusterIP
  port: 30088

dragonfly:
  tag: v0.0.1

hf:
  repoId: "Qwen/Qwen3-VL-8B-Instruct-FP8"
  tokenSecret:
    enabled: true
    name: hf-token
    key: token

keda:
  enabled: true
  minReplicaCount: 1
  maxReplicaCount: 1
  triggers:
    - type: prometheus
      metricType: Value
      metadata:
        serverAddress: http://prometheus.monitoring.svc.cluster.local:9090
        metricName: sglang_e2e_p95_latency_seconds_32b
        query: |
          histogram_quantile(
            0.95,
            sum(
              rate(
                sglang:e2e_request_latency_seconds_bucket{
                  model_name="Qwen/Qwen3-VL-8B-Instruct-FP8"
                }[3m]
              )
            ) by (le)
          )
        threshold: "10"